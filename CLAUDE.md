# プロジェクト概要

React + Hono + RPC を用いたフロントエンド・バックエンド統合テンプレート

* フロントエンド：React（Vite）
* バックエンド：Hono（Cloudflare Workers 前提）
* 通信方式：Hono RPC（型安全通信）

本リポジトリは **テンプレート用途** を目的としており、設計の分かりやすさ・拡張のしやすさを最優先とする。

---

# 主要コマンド

## フロントエンド

* npm run dev: 開発サーバー起動
* npm run test: テスト実行

## バックエンド

* npm run dev: 開発サーバー起動
* npm run test: テスト実行

---

# 新機能追加時の進め方

1. 調査
2. 計画
3. 実装
4. テスト

---

# バグ修正時の進め方

1. 原因調査
2. テスト作成（TDD）
3. 修正実装
4. 動作確認

---

# コーディング規約（共通）

* TypeScript の厳密モードを使用する
* 関数・コンポーネントは function 宣言で定義する
* スタイルは Tailwind CSS のみを使用する
* テストは Vitest で記述する

---

## 指示・回答について

* 回答は日本語で行うこと
* 指示をする側も人間であり、誤りが含まれる可能性がある

  * 指示内容は批判的に検討し、誤りがあれば指摘すること
* 指示内容を鵜呑みにせず、背景や説明不足を感じた場合は確認を取ること
* 指示された案以外にも選択肢がないか検討し、より良い案があれば提案すること

---

## 設計指針

* いきなりコードを書き始めず、まず設計案を提示すること
* 設計検討時は以下を順守する

  * 複数案を提示し、それぞれのメリット・デメリットを併記する
  * 現在の目的に対して最もシンプルかつメンテナンス性の高い案を1つ選定する
  * 将来どのような変更が入るとその案が破綻するかも併せて説明する

---

## RPC 設計指針（重要）

* バックエンドは REST API の URL 設計を前提とする
* フロントエンドは URL や HTTP メソッドを意識しない（RPC クライアント経由で呼び出す）
* RPC の型定義は **バックエンドを単一の source of truth** とする
* フロントエンドで API 用の型を新規定義しない
* Hono の app / router 定義から RPC クライアントを生成する
* fetch / axios を直接使用しない（ファイルアップロード等の例外を除く）

---

## コードレビュー指針

* コードレビュー時は、結論だけでなく調査プロセスも共有すること
* 結論には、それを裏付ける重要な根拠を併せて提示すること
* 常に **最新のファイル内容** を前提にレビューを行うこと
* レビュアーと実装者が一緒に妥当性を確認する姿勢を取ること

---

## 実装指針

* 段階的に進める（小さな変更を積み重ねる）
* 複数タスクを同時並行で進めない
* エラーは必ず解消してから次へ進む
* エラーを無視して進めない
* 指示にない機能を勝手に追加しない

---

## エラー対応指針

* 「なぜ期待と異なる挙動が起きたのか」を必ず深掘りしてから次の対応を検討する

---

# 注意事項（共通）

* 環境変数は .env で管理する（コミット禁止）
* 以下のファイルの参照・出力・実行を禁止する

  * .env
  * *.env
  * .env.*
  * .dev.vars
* 秘密情報（APIキー、トークン、認証情報）を推測しない
* 明示的な指示がない限り、ファイルの作成・修正・削除を行わない
* GitHub に含めるべきでないファイルを作成する場合は、必ず .gitignore に追加する

## 修正作業時のルール

* 修正による影響範囲を慎重に確認すること
* 他の挙動にも修正が必要な場合は、既存の期待動作が保たれるよう対応すること
* 修正内容について **コミットは実施しない**

## その他

* 指示なくビルドを実行しないこと
